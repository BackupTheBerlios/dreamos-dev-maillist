<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Dreamos-dev] r8 - in trunk: . boot include include/lng mem shell
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/dreamos-dev/2008-June/index.html" >
   <LINK REL="made" HREF="mailto:dreamos-dev%40lists.berlios.de?Subject=Re%3A%20%5BDreamos-dev%5D%20r8%20-%20in%20trunk%3A%20.%20boot%20include%20include/lng%20mem%20shell&In-Reply-To=%3C200806291328.m5TDSBNP026410%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000007.html">
   <LINK REL="Next"  HREF="000009.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Dreamos-dev] r8 - in trunk: . boot include include/lng mem shell</H1>
    <B>finarfin at BerliOS</B> 
    <A HREF="mailto:dreamos-dev%40lists.berlios.de?Subject=Re%3A%20%5BDreamos-dev%5D%20r8%20-%20in%20trunk%3A%20.%20boot%20include%20include/lng%20mem%20shell&In-Reply-To=%3C200806291328.m5TDSBNP026410%40sheep.berlios.de%3E"
       TITLE="[Dreamos-dev] r8 - in trunk: . boot include include/lng mem shell">finarfin at mail.berlios.de
       </A><BR>
    <I>Sun Jun 29 15:28:11 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000007.html">[Dreamos-dev] r7 - in trunk: . include/shell shell system
</A></li>
        <LI>Next message: <A HREF="000009.html">[Dreamos-dev] r9 - in trunk: . shell
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8">[ date ]</a>
              <a href="thread.html#8">[ thread ]</a>
              <a href="subject.html#8">[ subject ]</a>
              <a href="author.html#8">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: finarfin
Date: 2008-06-29 15:28:09 +0200 (Sun, 29 Jun 2008)
New Revision: 8

Modified:
   trunk/Makefile
   trunk/TODO
   trunk/bl.img
   trunk/bochsout.txt
   trunk/boot/multicatcher.S
   trunk/dreamos.img
   trunk/include/kernel.h
   trunk/include/lng/en.h
   trunk/include/lng/it.h
   trunk/include/use.h
   trunk/kernel.c
   trunk/kernel.map
   trunk/mem/paging.c
   trunk/shell/shell.c
Log:
Aggiunti alcuni messaggi in it.h e en.h
Alcune modifiche alle stampe di avvio
Aggiunto un parametro al makefile


Modified: trunk/Makefile
===================================================================
--- trunk/Makefile	2008-06-10 21:32:30 UTC (rev 7)
+++ trunk/Makefile	2008-06-29 13:28:09 UTC (rev 8)
@@ -1,4 +1,4 @@
-CFLAGS = -nostdlib -fomit-frame-pointer -fno-builtin -Wall -march=i386 -I./include -I./include/io -I./include/drivers -I./include/libc -I./include/processore -I./include/hardware -I./include/mem -I./include/system -I./include/shell
+CFLAGS = -nostdlib -fomit-frame-pointer -fno-builtin -fno-stack-protector -Wall -march=i386 -I./include -I./include/io -I./include/drivers -I./include/libc -I./include/processore -I./include/hardware -I./include/mem -I./include/system -I./include/shell
 OBJ = kernel.o io/video.o drivers/keyboard.o libc/ctype.o libc/string.o io/io.o libc/stdio.o hardware/cpuid.o hardware/keyboard.o processore/gdt.o processore/idt.o processore/handlers.o hardware/pic8259.o mem/fismem.o mem/paging.o system/syscall.o hardware/8253.o shell/shell.o
 
 dreamos.img: bl.img kernel.bin

Modified: trunk/TODO
===================================================================
--- trunk/TODO	2008-06-10 21:32:30 UTC (rev 7)
+++ trunk/TODO	2008-06-29 13:28:09 UTC (rev 8)
@@ -6,15 +6,12 @@
 - Routine asm per individuare quantita' ram
 - Le routine di gestione degli irq, devono controllare se effettivamente esiste un IRQ per il device che controllano, in caso affermativo proseguono, in caso negativo si fermano.
 - Logo dreamos in ASCII ART :D
-- Inserire gestore PIT (timer)
 - MMU
 - Funzioni sullo stato registri EFLAGS e CR*
 - RIVEDERE PRINTF - Forse non stampa i numeri troppo lunghi - problema degli unsigned int.
 - Todo rivedere quali sono le eccezioni che hanno un error code e sostituire le relative EXCEPTION(xx) con EXCEPTION_EC(xx)
-- Eliminare _prova come definizione e come add_IRQ in init_IRQ.
 - Fare una mega pulizia del codice
 - Eliminare il maggior numero di messaggi di errore dalla compilazione
 
 PROGETTI A LUNGO TERMINE:
-- Supporto per il MultiBoot (avvio con Grub)
 - Implementazione di un migliore scrolling

Modified: trunk/bl.img
===================================================================
(Binary files differ)

Modified: trunk/bochsout.txt
===================================================================
--- trunk/bochsout.txt	2008-06-10 21:32:30 UTC (rev 7)
+++ trunk/bochsout.txt	2008-06-29 13:28:09 UTC (rev 8)
@@ -1,12 +1,11 @@
-00000000000i[     ] Bochs x86 Emulator 2.3.6
-00000000000i[     ]   Build from CVS snapshot, on December 24, 2007
+00000000000i[     ] Bochs x86 Emulator 2.3.7
+00000000000i[     ]   Build from CVS snapshot, on June 3, 2008
 00000000000i[     ] System configuration
 00000000000i[     ]   processors: 1 (cores=1, HT threads=1)
 00000000000i[     ]   A20 line support: yes
 00000000000i[     ]   APIC support: yes
 00000000000i[     ] CPU configuration
 00000000000i[     ]   level: 6
-00000000000i[     ]   TLB enabled: yes
 00000000000i[     ]   SMP support: no
 00000000000i[     ]   FPU support: yes
 00000000000i[     ]   MMX support: yes
@@ -20,6 +19,8 @@
 00000000000i[     ]   x86-64 support: yes
 00000000000i[     ]   SEP support: yes
 00000000000i[     ]   MWAIT support: no
+00000000000i[     ]   XSAVE support: no
+00000000000i[     ]   AES support: no
 00000000000i[     ] Optimization configuration
 00000000000i[     ]   Guest2HostTLB support: yes
 00000000000i[     ]   RepeatSpeedups support: yes
@@ -33,62 +34,62 @@
 00000000000i[     ]   SB16 support: yes
 00000000000i[     ]   USB support: yes
 00000000000i[     ]   VGA extension support: vbe 
-00000000000i[MEM0 ] allocated memory at 0xb52a4008. after alignment, vector=0xb52a5000
+00000000000i[MEM0 ] allocated memory at 0xb4e32008. after alignment, vector=0xb4e33000
 00000000000i[MEM0 ] 16,00MB
 00000000000i[MEM0 ] rom at 0xfffe0000/131072 ('/usr/share/bochs/BIOS-bochs-latest')
-00000000000i[MEM0 ] rom at 0xc0000/38400 ('/usr/share/vgabios/vgabios.bin')
+00000000000i[MEM0 ] rom at 0xc0000/39936 ('/usr/share/vgabios/vgabios.bin')
 00000000000i[APIC?] set APIC ID to 0
 00000000000i[APIC0] 80686
 00000000000i[APIC0] local apic in CPU apicid=00 initializing
-00000000000i[     ] lt_dlhandle is 0xaebf108
+00000000000i[     ] lt_dlhandle is 0x8ec4458
 00000000000i[PLGIN] loaded plugin libbx_unmapped.la
-00000000000i[     ] lt_dlhandle is 0xaebf5e0
+00000000000i[     ] lt_dlhandle is 0x8ec43e8
 00000000000i[PLGIN] loaded plugin libbx_biosdev.la
-00000000000i[     ] lt_dlhandle is 0xaebfbf0
+00000000000i[     ] lt_dlhandle is 0x8ec7288
 00000000000i[PLGIN] loaded plugin libbx_cmos.la
-00000000000i[     ] lt_dlhandle is 0xaebfd48
+00000000000i[     ] lt_dlhandle is 0x8ec78a8
 00000000000i[PLGIN] loaded plugin libbx_dma.la
-00000000000i[     ] lt_dlhandle is 0xaec02a8
+00000000000i[     ] lt_dlhandle is 0x8ec7f10
 00000000000i[PLGIN] loaded plugin libbx_pic.la
-00000000000i[     ] lt_dlhandle is 0xaec0c80
+00000000000i[     ] lt_dlhandle is 0x8ec8558
 00000000000i[PLGIN] loaded plugin libbx_vga.la
-00000000000i[     ] lt_dlhandle is 0xaee69f0
+00000000000i[     ] lt_dlhandle is 0x8eee2a0
 00000000000i[PLGIN] loaded plugin libbx_floppy.la
-00000000000i[     ] lt_dlhandle is 0xaee71a8
+00000000000i[     ] lt_dlhandle is 0x8eeeae0
 00000000000i[PLGIN] loaded plugin libbx_harddrv.la
-00000000000i[     ] lt_dlhandle is 0xaee7338
+00000000000i[     ] lt_dlhandle is 0x8f00728
 00000000000i[PLGIN] loaded plugin libbx_keyboard.la
-00000000000i[     ] lt_dlhandle is 0xaef8f00
+00000000000i[     ] lt_dlhandle is 0x8da2068
 00000000000i[PLGIN] loaded plugin libbx_serial.la
-00000000000i[     ] lt_dlhandle is 0xaef9740
+00000000000i[     ] lt_dlhandle is 0x8f008e0
 00000000000i[PLGIN] loaded plugin libbx_parallel.la
-00000000000i[     ] lt_dlhandle is 0xaefa100
+00000000000i[     ] lt_dlhandle is 0x8e2ea80
 00000000000i[PLGIN] loaded plugin libbx_extfpuirq.la
-00000000000i[     ] lt_dlhandle is 0xaefa7c8
+00000000000i[     ] lt_dlhandle is 0x8f08280
 00000000000i[PLGIN] loaded plugin libbx_gameport.la
-00000000000i[     ] lt_dlhandle is 0xaefb000
+00000000000i[     ] lt_dlhandle is 0x8f08a98
 00000000000i[PLGIN] loaded plugin libbx_speaker.la
-00000000000i[     ] lt_dlhandle is 0xaefb080
+00000000000i[     ] lt_dlhandle is 0x8f08f18
 00000000000i[PLGIN] loaded plugin libbx_pci.la
-00000000000i[     ] lt_dlhandle is 0xaefacc8
+00000000000i[     ] lt_dlhandle is 0x8f08b10
 00000000000i[PLGIN] loaded plugin libbx_pci2isa.la
-00000000000i[     ] lt_dlhandle is 0xaefbc90
+00000000000i[     ] lt_dlhandle is 0x8f09780
 00000000000i[PLGIN] loaded plugin libbx_pci_ide.la
 00000000000i[IOAP ] initializing I/O APIC
 00000000000i[IOAP ] set APIC ID to 1
-00000000000i[MEM0 ] Register memory access handlers: fec00000-fec00fff
+00000000000i[MEM0 ] Register memory access handlers: 0xfec00000 - 0xfec00fff
 00000000000i[CMOS ] Using local time for initial clock
-00000000000i[CMOS ] Setting initial clock to: Tue Jun  3 23:07:27 2008 (time0=1212527247)
+00000000000i[CMOS ] Setting initial clock to: Sun Jun 29 12:12:20 2008 (time0=1214734340)
 00000000000i[DMA  ] channel 4 used by cascade
 00000000000i[DMA  ] channel 2 used by Floppy Drive
 00000000000i[FDD  ] fd0: 'boot/grub.img' ro=0, h=2,t=80,spt=18
 00000000000i[PCI  ] 440FX Host bridge present at device 0, function 0
 00000000000i[PCI  ] PIIX3 PCI-to-ISA bridge present at device 1, function 0
-00000000000i[MEM0 ] Register memory access handlers: 000a0000-000bffff
+00000000000i[MEM0 ] Register memory access handlers: 0x000a0000 - 0x000bffff
 00000000000i[KMAP ] Loading keymap from '/usr/share/bochs/keymaps/x11-pc-it.map'
 00000000000i[KMAP ] Loaded 170 symbols
 00000000000i[VGA  ] interval=300000
-00000000000i[MEM0 ] Register memory access handlers: e0000000-e07fffff
+00000000000i[MEM0 ] Register memory access handlers: 0xe0000000 - 0xe07fffff
 00000000000i[VGA  ] VBE Bochs Display Extension Enabled
 00000000000i[PLGIN] init_mem of 'harddrv' plugin device by virtual method
 00000000000i[PLGIN] init_mem of 'keyboard' plugin device by virtual method
@@ -133,35 +134,35 @@
 00000000000i[PLGIN] reset of 'gameport' plugin device by virtual method
 00000000000i[PLGIN] reset of 'speaker' plugin device by virtual method
 00000000000i[PLGIN] reset of 'pci_ide' plugin device by virtual method
-00000003302i[BIOS ] $Revision: 1.208 $ $Date: 2008/05/18 11:37:57 $
+00000003302i[BIOS ] $Revision: 1.209 $ $Date: 2008/06/02 20:08:10 $
 00000317069i[KBD  ] reset-disable command received
-00000436653i[VBIOS] VGABios $Id: vgabios.c,v 1.66 2006/07/10 07:47:51 vruppert Exp $
-00000436724i[VGA  ] VBE known Display Interface b0c0
-00000436756i[VGA  ] VBE known Display Interface b0c4
-00000439681i[VBIOS] VBE Bios $Id: vbe.c,v 1.58 2006/08/19 09:39:43 vruppert Exp $
+00000441261i[VBIOS] VGABios $Id: vgabios.c,v 1.67 2008/01/27 09:44:12 vruppert Exp $
+00000441332i[VGA  ] VBE known Display Interface b0c0
+00000441364i[VGA  ] VBE known Display Interface b0c4
+00000444289i[VBIOS] VBE Bios $Id: vbe.c,v 1.60 2008/03/02 07:47:21 vruppert Exp $
 00000600000i[WX   ] dimension update x=720 y=400 fontheight=16 fontwidth=9 bpp=8
-00000804355i[BIOS ] Starting rombios32
-00000805071i[BIOS ] ram_size=0x01000000
-00000825519i[BIOS ] Found 1 cpu(s)
-00000841586i[BIOS ] bios_table_addr: 0x000fb778 end=0x000fcc00
-00000841657i[PCI  ] 440FX PMC write to PAM register 59 (TLB Flush)
-00001169391i[PCI  ] 440FX PMC write to PAM register 59 (TLB Flush)
-00001497800i[P2I  ] PCI IRQ routing: PIRQA# set to 0x0b
-00001497848i[P2I  ] PCI IRQ routing: PIRQB# set to 0x09
-00001497896i[P2I  ] PCI IRQ routing: PIRQC# set to 0x0b
-00001497944i[P2I  ] PCI IRQ routing: PIRQD# set to 0x09
-00001497959i[P2I  ] write: ELCR2 = 0x0a
-00001498760i[BIOS ] PIIX3 init: elcr=00 0a
-00001518574i[BIOS ] PCI: bus=0 devfn=0x00: vendor_id=0x8086 device_id=0x1237
-00001521496i[BIOS ] PCI: bus=0 devfn=0x08: vendor_id=0x8086 device_id=0x7000
-00001523914i[BIOS ] PCI: bus=0 devfn=0x09: vendor_id=0x8086 device_id=0x7010
-00001524394i[PIDE ] new BM-DMA address: 0xc000
-00001525147i[BIOS ] region 4: 0x0000c000
-00001548231i[BIOS ] MP table addr=0x000fb850 MPC table addr=0x000fb780 size=0xd0
-00001549432i[BIOS ] SMBIOS table addr=0x000fb860
-00001549512i[PCI  ] 440FX PMC write to PAM register 59 (TLB Flush)
-00001550353i[BIOS ] bios_table_cur_addr: 0x000fb964
-00007803633i[BIOS ] Booting from 0000:7c00
-00013112173i[BIOS ] int13_harddisk: function 41, unmapped device for ELDL=80
-00013116950i[BIOS ] int13_harddisk: function 08, unmapped device for ELDL=80
-00013121608i[BIOS ] *** int 15h function AX=00c0, BX=0000 not yet supported!
+00000772077i[BIOS ] Starting rombios32
+00000772758i[BIOS ] ram_size=0x01000000
+00000793162i[BIOS ] Found 1 cpu(s)
+00000814996i[BIOS ] bios_table_addr: 0x000fb778 end=0x000fcc00
+00000815024i[PCI  ] 440FX PMC write to PAM register 59 (TLB Flush)
+00001142720i[PCI  ] 440FX PMC write to PAM register 59 (TLB Flush)
+00001470647i[P2I  ] PCI IRQ routing: PIRQA# set to 0x0b
+00001470668i[P2I  ] PCI IRQ routing: PIRQB# set to 0x09
+00001470689i[P2I  ] PCI IRQ routing: PIRQC# set to 0x0b
+00001470710i[P2I  ] PCI IRQ routing: PIRQD# set to 0x09
+00001470720i[P2I  ] write: ELCR2 = 0x0a
+00001471485i[BIOS ] PIIX3 init: elcr=00 0a
+00001479003i[BIOS ] PCI: bus=0 devfn=0x00: vendor_id=0x8086 device_id=0x1237
+00001481189i[BIOS ] PCI: bus=0 devfn=0x08: vendor_id=0x8086 device_id=0x7000
+00001483214i[BIOS ] PCI: bus=0 devfn=0x09: vendor_id=0x8086 device_id=0x7010
+00001483456i[PIDE ] new BM-DMA address: 0xc000
+00001484160i[BIOS ] region 4: 0x0000c000
+00001493477i[BIOS ] MP table addr=0x000fb850 MPC table addr=0x000fb780 size=0xd0
+00001495093i[BIOS ] SMBIOS table addr=0x000fb860
+00001495132i[PCI  ] 440FX PMC write to PAM register 59 (TLB Flush)
+00001495976i[BIOS ] bios_table_cur_addr: 0x000fb964
+00007693783i[BIOS ] Booting from 0000:7c00
+00012879622i[BIOS ] int13_harddisk: function 41, unmapped device for ELDL=80
+00012884399i[BIOS ] int13_harddisk: function 08, unmapped device for ELDL=80
+00012889057i[BIOS ] *** int 15h function AX=00c0, BX=0000 not yet supported!

Modified: trunk/boot/multicatcher.S
===================================================================
--- trunk/boot/multicatcher.S	2008-06-10 21:32:30 UTC (rev 7)
+++ trunk/boot/multicatcher.S	2008-06-29 13:28:09 UTC (rev 8)
@@ -27,12 +27,12 @@
   dd  start                     ; Kernel start point
 
 [GLOBAL start]
-[EXTERN _start]                   ; The start point of our C code
+[EXTERN main_loop]                   ; The start point of our C code
 
 start:
   push    ebx                   ; Load multiboot header
 
 ; Real execution
   cli                         ; Disable interrupts.  x11-pc-it.map 
-  call _start                   ; main() procedure, located in kernel.c
+  call main_loop                   ; main() procedure, located in kernel.c
   jmp $                       ; Enter an infinite loop to &quot;freeze&quot; the OS after the boot
\ No newline at end of file

Modified: trunk/dreamos.img
===================================================================
(Binary files differ)

Modified: trunk/include/kernel.h
===================================================================
--- trunk/include/kernel.h	2008-06-10 21:32:30 UTC (rev 7)
+++ trunk/include/kernel.h	2008-06-29 13:28:09 UTC (rev 8)
@@ -26,10 +26,10 @@
 #define _KERNEL_H
 
 #define asmlinkage __attribute__((regparm(0)))
-asmlinkage void _start();
-int main_loop();
+asmlinkage void _start(struct multiboot_info*);
+int main_loop(struct multiboot_info*);
 
 #define DREAMOS_VER &quot;DreamOS ver 0.1 - Rebuild&quot;
-#define SITEURL &quot;dreamos.altervista.org&quot;
+#define SITEURL &quot;www.dreamos.org&quot;
 
 #endif

Modified: trunk/include/lng/en.h
===================================================================
--- trunk/include/lng/en.h	2008-06-10 21:32:30 UTC (rev 7)
+++ trunk/include/lng/en.h	2008-06-29 13:28:09 UTC (rev 8)
@@ -1,3 +1,18 @@
+/*  DreamOS
+    en.h
+    This file is part of Foobar.
+    Foobar is free software: you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation, either version 3 of the License, or
+    (at your option) any later version.
+    Foobar is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+    GNU General Public License for more details.
+    You should have received a copy of the GNU General Public License
+    along with Foobar.  If not, see &lt;<A HREF="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</A>&gt;.
+*/
+
 #ifndef _EN_H_
 #define _EN_H_
 
@@ -4,6 +19,7 @@
 #define LNG_SITE &quot;\nSite: &quot;
 #define LNG_GDT &quot;Initialize GDT   &quot;
 #define LNG_IDT &quot;Initialize IDT   &quot;
+#define LNG_PIT8253 &quot;Initialize PIT    &quot;
 #define LNG_PIC8259 &quot;Initialize PIC8259    &quot;
 #define LNG_CPU &quot;\nCPU: &quot;
 #define LNG_FREERAM &quot;Free RAM:&quot;

Modified: trunk/include/lng/it.h
===================================================================
--- trunk/include/lng/it.h	2008-06-10 21:32:30 UTC (rev 7)
+++ trunk/include/lng/it.h	2008-06-29 13:28:09 UTC (rev 8)
@@ -1,3 +1,18 @@
+/*  DreamOS
+    it.h
+    This file is part of Foobar.
+    Foobar is free software: you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation, either version 3 of the License, or
+    (at your option) any later version.
+    Foobar is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+    GNU General Public License for more details.
+    You should have received a copy of the GNU General Public License
+    along with Foobar.  If not, see &lt;<A HREF="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</A>&gt;.
+*/
+
 #ifndef _IT_H_
 #define _IT_H_
 
@@ -4,6 +19,7 @@
 #define LNG_SITE &quot;\nSito: &quot;
 #define LNG_GDT &quot;Inizializzo GDT   &quot;
 #define LNG_IDT &quot;Inizializzo IDT   &quot;
+#define LNG_PIC8253 &quot;Inizializzo PIT    &quot;
 #define LNG_PIC8259 &quot;Inizializzo PIC8259    &quot;
 #define LNG_CPU &quot;\nProcessore: &quot;
 #define LNG_FREERAM &quot;Ram Disposizione:&quot;

Modified: trunk/include/use.h
===================================================================
--- trunk/include/use.h	2008-06-10 21:32:30 UTC (rev 7)
+++ trunk/include/use.h	2008-06-29 13:28:09 UTC (rev 8)
@@ -1,13 +1,29 @@
-#ifndef _IT_H_
-#define _IT_H_
+/*  DreamOS
+    en.h
+    This file is part of Foobar.
+    Foobar is free software: you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation, either version 3 of the License, or
+    (at your option) any later version.
+    Foobar is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+    GNU General Public License for more details.
+    You should have received a copy of the GNU General Public License
+    along with Foobar.  If not, see &lt;<A HREF="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</A>&gt;.
+*/
 
-#define LNG_SITE &quot;\nSito: &quot;
-#define LNG_GDT &quot;Inizializzo GDT   &quot;
-#define LNG_IDT &quot;Inizializzo IDT   &quot;
-#define LNG_PIC8259 &quot;Inizializzo PIC8259    &quot;
-#define LNG_CPU &quot;\nProcessore: &quot;
-#define LNG_FREERAM &quot;Ram Disposizione:&quot;
-#define LNG_FREEPAGE &quot;\t- Numero Pagine a disposizione:&quot;
-#define LNG_BITMAP &quot;\t- Numero elementi della bitmap:&quot;
+#ifndef _EN_H_
+#define _EN_H_
 
+#define LNG_SITE &quot;\nSite: &quot;
+#define LNG_GDT &quot;Initialize GDT   &quot;
+#define LNG_IDT &quot;Initialize IDT   &quot;
+#define LNG_PIT8253 &quot;Initialize PIT    &quot;
+#define LNG_PIC8259 &quot;Initialize PIC8259    &quot;
+#define LNG_CPU &quot;\nCPU: &quot;
+#define LNG_FREERAM &quot;Free RAM:&quot;
+#define LNG_FREEPAGE &quot;\t- Number free page:&quot;
+#define LNG_BITMAP &quot;\t- Number bitmap's elements:&quot;
+
 #endif

Modified: trunk/kernel.c
===================================================================
--- trunk/kernel.c	2008-06-10 21:32:30 UTC (rev 7)
+++ trunk/kernel.c	2008-06-29 13:28:09 UTC (rev 8)
@@ -41,15 +41,16 @@
 #include &lt;shell.h&gt;
 
 unsigned int *current_page_table;
-multiboot_info_t *boot_informations;
-asmlinkage void _start(){
+// multiboot_info_t *boot_informations;
+asmlinkage void _start(struct multiboot_info *boot_info){
 //     boot_informations = boot_info;    
-	main_loop();
+	main_loop(boot_info);
 	while(1);
 }
 
-int main_loop()
+int main_loop(struct multiboot_info *boot_info)
 {
+    int a;
     _kclear();
 
     _kcolor('\012');
@@ -60,8 +61,7 @@
     _kputs(SITEURL);
     _kputs(&quot;\n&quot;);
     _kcolor('\007');
-    _kputs(&quot;\n&quot;);
-
+    _kputs(&quot;\n&quot;);    
     _kputs(LNG_GDT);
     init_gdt();
     _kprintOK();
@@ -76,22 +76,21 @@
     _kputs(LNG_PIC8259);
     init_IRQ();
     asm(&quot;sti&quot;);
-    _kprintOK();
-    init_paging();
-
+    _kprintOK();   
+    init_paging();    
     get_cpuid();
     init_mem();
+    printf(LNG_PIT8253);
+    configure_PIT ();    
+    _kprintOK();
     asm (&quot;movl $0, %eax\n&quot;
-	 &quot;movl $35, %ebx\n&quot;
-	 &quot;int $80&quot;);
-
-    configure_PIT ();
-
+     &quot;movl $35, %ebx\n&quot;
+     &quot;int $80&quot;);
     printf(&quot;\n&quot;);
     printf(&quot;----\n&quot;);
     printf(&quot;Loading the shell..\n&quot;);
-    printf(&quot;[+] Loading compleate!!\n\n&quot;);
-
+    printf(&quot;[+] Loading complete!!\n\n&quot;);
+    printf(&quot;Boot info-&gt;mem_upper: %d\n&quot;, boot_info-&gt;mem_upper);
     shell();
     
 /*    if ( (shell()) != NULL)

Modified: trunk/kernel.map
===================================================================
--- trunk/kernel.map	2008-06-10 21:32:30 UTC (rev 7)
+++ trunk/kernel.map	2008-06-29 13:28:09 UTC (rev 8)
@@ -8,7 +8,6 @@
 upbuffer            0xfa0             io/video.o
 IDT_Table           0x800             processore/idt.o
 cpu_vendor          0xc               kernel.o
-boot_informations   0x4               kernel.o
 tot_mem             0x4               mem/fismem.o
 slave_cur_mask      0x1               hardware/pic8259.o
 current_page_dir    0x4               mem/paging.o
@@ -29,250 +28,249 @@
 
                 0x0000000000100000                . = 0x100000
 
-.text           0x0000000000100000     0x3ea3
+.text           0x0000000000100000     0x3edb
  *(.text)
  .text          0x0000000000100000       0x1d bl.img
                 0x0000000000100000                mboot
                 0x0000000000100014                start
  *fill*         0x000000000010001d        0x3 00
- .text          0x0000000000100020      0x17b kernel.o
-                0x000000000010002a                main_loop
+ .text          0x0000000000100020      0x1b2 kernel.o
+                0x0000000000100034                main_loop
                 0x0000000000100020                _start
- *fill*         0x000000000010019b        0x1 00
- .text          0x000000000010019c      0x9d1 io/video.o
-                0x0000000000100af2                _kscrolldown
-                0x000000000010019c                _kputc
-                0x00000000001001de                _kputs
-                0x0000000000100278                _kbackspace
-                0x00000000001009c7                _krotate_buffer
-                0x00000000001003b5                _ksetcursauto
-                0x0000000000100262                _kcolor
-                0x00000000001004c5                _kdecbin
-                0x0000000000100384                _ksetcursor
-                0x0000000000100417                _kprintOK
-                0x000000000010028e                _ktab
-                0x000000000010029c                _kgoto
-                0x0000000000100331                _knewline
-                0x0000000000100a48                _kscrollup
-                0x00000000001002ca                _kclear
-                0x000000000010048b                _kgetline
-                0x0000000000100809                _kntos
-                0x0000000000100441                _kgetcolumn
-                0x000000000010059c                _kntohex
-                0x00000000001008f8                _kshiftAll
- *fill*         0x0000000000100b6d        0x3 00
- .text          0x0000000000100b70      0x5b5 drivers/keyboard.o
-                0x0000000000100fa1                _ksetleds
-                0x00000000001010cd                _kgetch
-                0x00000000001010b4                keyboard_disable
-                0x000000000010109b                keyboard_enable
-                0x0000000000100b70                keyboard_isr
- *fill*         0x0000000000101125        0x3 00
- .text          0x0000000000101128      0x19a libc/ctype.o
-                0x00000000001011f8                islower
-                0x0000000000101248                tolower
-                0x00000000001011c0                isxdigit
-                0x0000000000101220                isupper
-                0x0000000000101150                isalpha
-                0x0000000000101186                isalnum
-                0x0000000000101128                isdigit
-                0x0000000000101285                toupper
- *fill*         0x00000000001012c2        0x2 00
- .text          0x00000000001012c4      0x2eb libc/string.o
-                0x000000000010143f                strstr
-                0x00000000001012c4                strncpy
-                0x00000000001014bb                strtok
-                0x0000000000101545                strncat
-                0x00000000001013ce                strdup
-                0x0000000000101398                memset
-                0x0000000000101324                _kstrncmp
-                0x00000000001012fd                strlen
-                0x000000000010141e                strchr
- *fill*         0x00000000001015af        0x1 00
- .text          0x00000000001015b0       0x23 io/io.o
-                0x00000000001015b0                inportb
-                0x00000000001015c9                outportb
- *fill*         0x00000000001015d3        0x1 00
- .text          0x00000000001015d4      0x632 libc/stdio.o
-                0x00000000001015d4                putchar
-                0x00000000001016de                printf
-                0x0000000000101ab2                gets
-                0x0000000000101a97                getchar
-                0x0000000000101b25                scanf
-                0x00000000001015ee                atoi
- *fill*         0x0000000000101c06        0x2 00
- .text          0x0000000000101c08      0x18c hardware/cpuid.o
-                0x0000000000101c08                get_cpuid
- .text          0x0000000000101d94       0x67 hardware/keyboard.o
-                0x0000000000101d94                keyboard_irq
- *fill*         0x0000000000101dfb        0x1 00
- .text          0x0000000000101dfc      0x1d0 processore/gdt.o
-                0x0000000000101ed8                add_GDTseg
-                0x0000000000101dfc                init_gdt
-                0x0000000000101f83                set_gdtr
- .text          0x0000000000101fcc      0x65d processore/idt.o
-                0x000000000010258d                add_IDTseg
-                0x0000000000102301                init_idt
-                0x0000000000102601                set_idtr
- *fill*         0x0000000000102629        0x3 00
- .text          0x000000000010262c      0x39f processore/handlers.o
-                0x000000000010262c                init_funcTable
-                0x0000000000102924                _irqinterrupt
-                0x00000000001026ae                _globalException
-                0x000000000010269e                add_Interrupt
-                0x00000000001029b6                _int_rsv
- *fill*         0x00000000001029cb        0x1 00
- .text          0x00000000001029cc      0x747 hardware/pic8259.o
-                0x0000000000102bfd                init_IRQ
-                0x0000000000102d39                setup_IRQ
-                0x0000000000102f74                disable_IRQ
-                0x0000000000103054                add_IRQ_handler
-                0x0000000000102ea0                enable_IRQ
-                0x0000000000103026                get_current_irq
- *fill*         0x0000000000103113        0x1 00
- .text          0x0000000000103114      0x628 mem/fismem.o
-                0x0000000000103114                init_mem
-                0x00000000001031d8                request_pages
-                0x0000000000103598                add_memarea_element
-                0x00000000001036ae                get_numpages
-                0x00000000001036a8                get_memsize
-                0x00000000001036d4                malloc
-                0x00000000001036c1                get_bmpelements
-                0x0000000000103333                release_pages
-                0x000000000010368c                calcola_memoria
-                0x0000000000103712                free
- .text          0x000000000010373c      0x2ca mem/paging.o
-                0x000000000010384a                create_pageTable
-                0x000000000010373c                init_paging
-                0x0000000000103979                get_pagedir_entry
-                0x0000000000103834                create_pageDir
-                0x00000000001039c0                load_pdbr
-                0x0000000000103927                set_pagetable_entry_ric
-                0x0000000000103996                get_pagetable_entry
-                0x0000000000103860                set_pagedir_entry
-                0x00000000001038a1                set_pagedir_entry_ric
-                0x00000000001038e6                set_pagetable_entry
- *fill*         0x0000000000103a06        0x2 00
- .text          0x0000000000103a08       0xba system/syscall.o
-                0x0000000000103a08                sysputch
-                0x0000000000103a2e                syscall_handler
- *fill*         0x0000000000103ac2        0x2 00
- .text          0x0000000000103ac4       0xfa hardware/8253.o
-                0x0000000000103b8f                sleep
-                0x0000000000103ac4                PIT_handler
-                0x0000000000103b2f                configure_PIT
- *fill*         0x0000000000103bbe        0x2 00
- .text          0x0000000000103bc0      0x2e3 shell/shell.o
-                0x0000000000103c06                info
-                0x0000000000103db4                shell
-                0x0000000000103bfe                poweroff
-                0x0000000000103be7                help
-                0x0000000000103bc0                logo
+ *fill*         0x00000000001001d2        0x2 00
+ .text          0x00000000001001d4      0x9d1 io/video.o
+                0x0000000000100b2a                _kscrolldown
+                0x00000000001001d4                _kputc
+                0x0000000000100216                _kputs
+                0x00000000001002b0                _kbackspace
+                0x00000000001009ff                _krotate_buffer
+                0x00000000001003ed                _ksetcursauto
+                0x000000000010029a                _kcolor
+                0x00000000001004fd                _kdecbin
+                0x00000000001003bc                _ksetcursor
+                0x000000000010044f                _kprintOK
+                0x00000000001002c6                _ktab
+                0x00000000001002d4                _kgoto
+                0x0000000000100369                _knewline
+                0x0000000000100a80                _kscrollup
+                0x0000000000100302                _kclear
+                0x00000000001004c3                _kgetline
+                0x0000000000100841                _kntos
+                0x0000000000100479                _kgetcolumn
+                0x00000000001005d4                _kntohex
+                0x0000000000100930                _kshiftAll
+ *fill*         0x0000000000100ba5        0x3 00
+ .text          0x0000000000100ba8      0x5b5 drivers/keyboard.o
+                0x0000000000100fd9                _ksetleds
+                0x0000000000101105                _kgetch
+                0x00000000001010ec                keyboard_disable
+                0x00000000001010d3                keyboard_enable
+                0x0000000000100ba8                keyboard_isr
+ *fill*         0x000000000010115d        0x3 00
+ .text          0x0000000000101160      0x19a libc/ctype.o
+                0x0000000000101230                islower
+                0x0000000000101280                tolower
+                0x00000000001011f8                isxdigit
+                0x0000000000101258                isupper
+                0x0000000000101188                isalpha
+                0x00000000001011be                isalnum
+                0x0000000000101160                isdigit
+                0x00000000001012bd                toupper
+ *fill*         0x00000000001012fa        0x2 00
+ .text          0x00000000001012fc      0x2eb libc/string.o
+                0x0000000000101477                strstr
+                0x00000000001012fc                strncpy
+                0x00000000001014f3                strtok
+                0x000000000010157d                strncat
+                0x0000000000101406                strdup
+                0x00000000001013d0                memset
+                0x000000000010135c                _kstrncmp
+                0x0000000000101335                strlen
+                0x0000000000101456                strchr
+ *fill*         0x00000000001015e7        0x1 00
+ .text          0x00000000001015e8       0x23 io/io.o
+                0x00000000001015e8                inportb
+                0x0000000000101601                outportb
+ *fill*         0x000000000010160b        0x1 00
+ .text          0x000000000010160c      0x632 libc/stdio.o
+                0x000000000010160c                putchar
+                0x0000000000101716                printf
+                0x0000000000101aea                gets
+                0x0000000000101acf                getchar
+                0x0000000000101b5d                scanf
+                0x0000000000101626                atoi
+ *fill*         0x0000000000101c3e        0x2 00
+ .text          0x0000000000101c40      0x18c hardware/cpuid.o
+                0x0000000000101c40                get_cpuid
+ .text          0x0000000000101dcc       0x67 hardware/keyboard.o
+                0x0000000000101dcc                keyboard_irq
+ *fill*         0x0000000000101e33        0x1 00
+ .text          0x0000000000101e34      0x1d0 processore/gdt.o
+                0x0000000000101f10                add_GDTseg
+                0x0000000000101e34                init_gdt
+                0x0000000000101fbb                set_gdtr
+ .text          0x0000000000102004      0x65d processore/idt.o
+                0x00000000001025c5                add_IDTseg
+                0x0000000000102339                init_idt
+                0x0000000000102639                set_idtr
+ *fill*         0x0000000000102661        0x3 00
+ .text          0x0000000000102664      0x39f processore/handlers.o
+                0x0000000000102664                init_funcTable
+                0x000000000010295c                _irqinterrupt
+                0x00000000001026e6                _globalException
+                0x00000000001026d6                add_Interrupt
+                0x00000000001029ee                _int_rsv
+ *fill*         0x0000000000102a03        0x1 00
+ .text          0x0000000000102a04      0x747 hardware/pic8259.o
+                0x0000000000102c35                init_IRQ
+                0x0000000000102d71                setup_IRQ
+                0x0000000000102fac                disable_IRQ
+                0x000000000010308c                add_IRQ_handler
+                0x0000000000102ed8                enable_IRQ
+                0x000000000010305e                get_current_irq
+ *fill*         0x000000000010314b        0x1 00
+ .text          0x000000000010314c      0x628 mem/fismem.o
+                0x000000000010314c                init_mem
+                0x0000000000103210                request_pages
+                0x00000000001035d0                add_memarea_element
+                0x00000000001036e6                get_numpages
+                0x00000000001036e0                get_memsize
+                0x000000000010370c                malloc
+                0x00000000001036f9                get_bmpelements
+                0x000000000010336b                release_pages
+                0x00000000001036c4                calcola_memoria
+                0x000000000010374a                free
+ .text          0x0000000000103774      0x2ca mem/paging.o
+                0x0000000000103882                create_pageTable
+                0x0000000000103774                init_paging
+                0x00000000001039b1                get_pagedir_entry
+                0x000000000010386c                create_pageDir
+                0x00000000001039f8                load_pdbr
+                0x000000000010395f                set_pagetable_entry_ric
+                0x00000000001039ce                get_pagetable_entry
+                0x0000000000103898                set_pagedir_entry
+                0x00000000001038d9                set_pagedir_entry_ric
+                0x000000000010391e                set_pagetable_entry
+ *fill*         0x0000000000103a3e        0x2 00
+ .text          0x0000000000103a40       0xba system/syscall.o
+                0x0000000000103a40                sysputch
+                0x0000000000103a66                syscall_handler
+ *fill*         0x0000000000103afa        0x2 00
+ .text          0x0000000000103afc       0xfa hardware/8253.o
+                0x0000000000103bc7                sleep
+                0x0000000000103afc                PIT_handler
+                0x0000000000103b67                configure_PIT
+ *fill*         0x0000000000103bf6        0x2 00
+ .text          0x0000000000103bf8      0x2e3 shell/shell.o
+                0x0000000000103c3e                info
+                0x0000000000103dec                shell
+                0x0000000000103c36                poweroff
+                0x0000000000103c1f                help
+                0x0000000000103bf8                logo
 
-.rodata         0x0000000000103ea4      0x759
+.rodata         0x0000000000103edc      0x759
  *(.rodata)
- .rodata        0x0000000000103ea4       0xae kernel.o
- .rodata        0x0000000000103f52       0x70 io/video.o
- .rodata        0x0000000000103fc2       0x10 drivers/keyboard.o
- .rodata        0x0000000000103fd2        0x2 libc/stdio.o
- .rodata        0x0000000000103fd4       0x3e hardware/cpuid.o
- .rodata        0x0000000000104012       0x1d hardware/keyboard.o
- *fill*         0x000000000010402f        0x1 00
- .rodata        0x0000000000104030      0x269 processore/handlers.o
- *fill*         0x0000000000104299        0x3 00
- .rodata        0x000000000010429c       0x8a mem/fismem.o
- *fill*         0x0000000000104326        0x2 00
- .rodata        0x0000000000104328       0x23 mem/paging.o
- *fill*         0x000000000010434b        0x1 00
- .rodata        0x000000000010434c        0xc system/syscall.o
- .rodata        0x0000000000104358      0x2a5 shell/shell.o
+ .rodata        0x0000000000103edc       0xd0 kernel.o
+ .rodata        0x0000000000103fac       0x70 io/video.o
+ .rodata        0x000000000010401c       0x10 drivers/keyboard.o
+ .rodata        0x000000000010402c        0x2 libc/stdio.o
+ .rodata        0x000000000010402e       0x3e hardware/cpuid.o
+ .rodata        0x000000000010406c       0x1d hardware/keyboard.o
+ *fill*         0x0000000000104089        0x3 00
+ .rodata        0x000000000010408c      0x269 processore/handlers.o
+ *fill*         0x00000000001042f5        0x3 00
+ .rodata        0x00000000001042f8       0x8a mem/fismem.o
+ *fill*         0x0000000000104382        0x2 00
+ .rodata        0x0000000000104384       0x23 mem/paging.o
+ *fill*         0x00000000001043a7        0x1 00
+ .rodata        0x00000000001043a8        0xc system/syscall.o
+ .rodata        0x00000000001043b4      0x281 shell/shell.o
 
-.rel.dyn        0x0000000000104600        0x0 load address 0x00000000001045fd
+.rel.dyn        0x0000000000104638        0x0 load address 0x0000000000104635
  .rel.text      0x0000000000000000        0x0 bl.img
 
-.data           0x0000000000104600    0x3376c
+.data           0x0000000000104640    0x3376c
  *(.data)
- .data          0x0000000000104600        0x0 kernel.o
- .data          0x0000000000104600        0x9 io/video.o
-                0x0000000000104604                VIDEO_PTR
-                0x0000000000104608                VIDEO_CLR
-                0x0000000000104600                VIDEO_MEM
- *fill*         0x0000000000104609       0x17 00
- .data          0x0000000000104620      0x2f8 drivers/keyboard.o
- .data          0x0000000000104918        0x0 libc/ctype.o
- .data          0x0000000000104918        0x0 libc/string.o
- .data          0x0000000000104918        0x0 io/io.o
- .data          0x0000000000104918        0x0 libc/stdio.o
- .data          0x0000000000104918        0x0 hardware/cpuid.o
- .data          0x0000000000104918        0x0 hardware/keyboard.o
- .data          0x0000000000104918        0x0 processore/gdt.o
- .data          0x0000000000104918        0x0 processore/idt.o
- .data          0x0000000000104918        0x0 processore/handlers.o
- .data          0x0000000000104918        0x0 hardware/pic8259.o
- .data          0x0000000000104918        0xc mem/fismem.o
-                0x0000000000104918                prova2
-                0x000000000010491c                mem_info_root
-                0x0000000000104920                mem_info
- .data          0x0000000000104924        0x0 mem/paging.o
- .data          0x0000000000104924        0x4 system/syscall.o
-                0x0000000000104924                syscall_table
- .data          0x0000000000104928        0x0 hardware/8253.o
- .data          0x0000000000104928        0x0 shell/shell.o
+ .data          0x0000000000104640        0x0 kernel.o
+ .data          0x0000000000104640        0x9 io/video.o
+                0x0000000000104644                VIDEO_PTR
+                0x0000000000104648                VIDEO_CLR
+                0x0000000000104640                VIDEO_MEM
+ *fill*         0x0000000000104649       0x17 00
+ .data          0x0000000000104660      0x2f8 drivers/keyboard.o
+ .data          0x0000000000104958        0x0 libc/ctype.o
+ .data          0x0000000000104958        0x0 libc/string.o
+ .data          0x0000000000104958        0x0 io/io.o
+ .data          0x0000000000104958        0x0 libc/stdio.o
+ .data          0x0000000000104958        0x0 hardware/cpuid.o
+ .data          0x0000000000104958        0x0 hardware/keyboard.o
+ .data          0x0000000000104958        0x0 processore/gdt.o
+ .data          0x0000000000104958        0x0 processore/idt.o
+ .data          0x0000000000104958        0x0 processore/handlers.o
+ .data          0x0000000000104958        0x0 hardware/pic8259.o
+ .data          0x0000000000104958        0xc mem/fismem.o
+                0x0000000000104958                prova2
+                0x000000000010495c                mem_info_root
+                0x0000000000104960                mem_info
+ .data          0x0000000000104964        0x0 mem/paging.o
+ .data          0x0000000000104964        0x4 system/syscall.o
+                0x0000000000104964                syscall_table
+ .data          0x0000000000104968        0x0 hardware/8253.o
+ .data          0x0000000000104968        0x0 shell/shell.o
  *(.bss)
- .bss           0x0000000000104928        0x0 kernel.o
- .bss           0x0000000000104928       0x10 io/video.o
-                0x000000000010492c                is_shifted_once
-                0x0000000000104928                is_scrolled
-                0x0000000000104934                resulthex
-                0x0000000000104930                binlen
- *fill*         0x0000000000104938        0x8 00
- .bss           0x0000000000104940      0x434 drivers/keyboard.o
- .bss           0x0000000000104d74        0x0 libc/ctype.o
- .bss           0x0000000000104d74        0x4 libc/string.o
- .bss           0x0000000000104d78        0x0 io/io.o
- .bss           0x0000000000104d78        0x0 libc/stdio.o
- .bss           0x0000000000104d78        0x0 hardware/cpuid.o
- .bss           0x0000000000104d78        0x0 hardware/keyboard.o
- .bss           0x0000000000104d78        0x0 processore/gdt.o
- .bss           0x0000000000104d78        0x0 processore/idt.o
- .bss           0x0000000000104d78        0x0 processore/handlers.o
- .bss           0x0000000000104d78        0x0 hardware/pic8259.o
- .bss           0x0000000000104d78        0x4 mem/fismem.o
-                0x0000000000104d78                num_pages
- .bss           0x0000000000104d7c        0x0 mem/paging.o
- .bss           0x0000000000104d7c        0x0 system/syscall.o
- .bss           0x0000000000104d7c        0x8 hardware/8253.o
- .bss           0x0000000000104d84        0x0 shell/shell.o
+ .bss           0x0000000000104968        0x0 kernel.o
+ .bss           0x0000000000104968       0x10 io/video.o
+                0x000000000010496c                is_shifted_once
+                0x0000000000104968                is_scrolled
+                0x0000000000104974                resulthex
+                0x0000000000104970                binlen
+ *fill*         0x0000000000104978        0x8 00
+ .bss           0x0000000000104980      0x434 drivers/keyboard.o
+ .bss           0x0000000000104db4        0x0 libc/ctype.o
+ .bss           0x0000000000104db4        0x4 libc/string.o
+ .bss           0x0000000000104db8        0x0 io/io.o
+ .bss           0x0000000000104db8        0x0 libc/stdio.o
+ .bss           0x0000000000104db8        0x0 hardware/cpuid.o
+ .bss           0x0000000000104db8        0x0 hardware/keyboard.o
+ .bss           0x0000000000104db8        0x0 processore/gdt.o
+ .bss           0x0000000000104db8        0x0 processore/idt.o
+ .bss           0x0000000000104db8        0x0 processore/handlers.o
+ .bss           0x0000000000104db8        0x0 hardware/pic8259.o
+ .bss           0x0000000000104db8        0x4 mem/fismem.o
+                0x0000000000104db8                num_pages
+ .bss           0x0000000000104dbc        0x0 mem/paging.o
+ .bss           0x0000000000104dbc        0x0 system/syscall.o
+ .bss           0x0000000000104dbc        0x8 hardware/8253.o
+ .bss           0x0000000000104dc4        0x0 shell/shell.o
  *(COMMON)
- COMMON         0x0000000000104d84       0x14 kernel.o
-                0x0000000000104d84                cpu_vendor
-                0x0000000000104d90                boot_informations
-                0x0000000000104d94                current_page_table
- *fill*         0x0000000000104d98        0x8 00
- COMMON         0x0000000000104da0     0x233c io/video.o
-                0x0000000000104da0                downbuffer
-                0x0000000000105d40                upbuffer
-                0x0000000000106ce0                binvp
- *fill*         0x00000000001070dc        0x4 00
- COMMON         0x00000000001070e0    0x10004 processore/gdt.o
-                0x00000000001070e0                Gdt_Table
-                0x00000000001170e0                current_pos
- *fill*         0x00000000001170e4       0x1c 00
- COMMON         0x0000000000117100      0xc00 processore/idt.o
-                0x0000000000117100                IntTable
-                0x0000000000117500                IDT_Table
- COMMON         0x0000000000117d00       0x40 processore/handlers.o
-                0x0000000000117d00                shareHandler
- COMMON         0x0000000000117d40        0x2 hardware/pic8259.o
-                0x0000000000117d40                slave_cur_mask
-                0x0000000000117d41                master_cur_mask
- *fill*         0x0000000000117d42       0x1e 00
- COMMON         0x0000000000117d60    0x20008 mem/fismem.o
-                0x0000000000117d60                mem_bitmap
-                0x0000000000137d60                tot_mem
-                0x0000000000137d64                bmp_elements
- COMMON         0x0000000000137d68        0x4 mem/paging.o
-                0x0000000000137d68                current_page_dir
+ COMMON         0x0000000000104dc4       0x10 kernel.o
+                0x0000000000104dc4                cpu_vendor
+                0x0000000000104dd0                current_page_table
+ *fill*         0x0000000000104dd4        0xc 00
+ COMMON         0x0000000000104de0     0x233c io/video.o
+                0x0000000000104de0                downbuffer
+                0x0000000000105d80                upbuffer
+                0x0000000000106d20                binvp
+ *fill*         0x000000000010711c        0x4 00
+ COMMON         0x0000000000107120    0x10004 processore/gdt.o
+                0x0000000000107120                Gdt_Table
+                0x0000000000117120                current_pos
+ *fill*         0x0000000000117124       0x1c 00
+ COMMON         0x0000000000117140      0xc00 processore/idt.o
+                0x0000000000117140                IntTable
+                0x0000000000117540                IDT_Table
+ COMMON         0x0000000000117d40       0x40 processore/handlers.o
+                0x0000000000117d40                shareHandler
+ COMMON         0x0000000000117d80        0x2 hardware/pic8259.o
+                0x0000000000117d80                slave_cur_mask
+                0x0000000000117d81                master_cur_mask
+ *fill*         0x0000000000117d82       0x1e 00
+ COMMON         0x0000000000117da0    0x20008 mem/fismem.o
+                0x0000000000117da0                mem_bitmap
+                0x0000000000137da0                tot_mem
+                0x0000000000137da4                bmp_elements
+ COMMON         0x0000000000137da8        0x4 mem/paging.o
+                0x0000000000137da8                current_page_dir
 LOAD bl.img
 LOAD kernel.o
 LOAD io/video.o
@@ -295,26 +293,26 @@
 Address of section .text set to 0x100000
 OUTPUT(kernel.bin elf32-i386)
 
-.comment        0x0000000000000000      0x226
- .comment       0x0000000000000000       0x1c bl.img
- .comment       0x000000000000001c       0x1d kernel.o
- .comment       0x0000000000000039       0x1d io/video.o
- .comment       0x0000000000000056       0x1d drivers/keyboard.o
- .comment       0x0000000000000073       0x1d libc/ctype.o
- .comment       0x0000000000000090       0x1d libc/string.o
- .comment       0x00000000000000ad       0x1d io/io.o
- .comment       0x00000000000000ca       0x1d libc/stdio.o
- .comment       0x00000000000000e7       0x1d hardware/cpuid.o
- .comment       0x0000000000000104       0x1d hardware/keyboard.o
- .comment       0x0000000000000121       0x1d processore/gdt.o
- .comment       0x000000000000013e       0x1d processore/idt.o
- .comment       0x000000000000015b       0x1d processore/handlers.o
- .comment       0x0000000000000178       0x1d hardware/pic8259.o
- .comment       0x0000000000000195       0x1d mem/fismem.o
- .comment       0x00000000000001b2       0x1d mem/paging.o
- .comment       0x00000000000001cf       0x1d system/syscall.o
- .comment       0x00000000000001ec       0x1d hardware/8253.o
- .comment       0x0000000000000209       0x1d shell/shell.o
+.comment        0x0000000000000000      0x229
+ .comment       0x0000000000000000       0x1f bl.img
+ .comment       0x000000000000001f       0x1d kernel.o
+ .comment       0x000000000000003c       0x1d io/video.o
+ .comment       0x0000000000000059       0x1d drivers/keyboard.o
+ .comment       0x0000000000000076       0x1d libc/ctype.o
+ .comment       0x0000000000000093       0x1d libc/string.o
+ .comment       0x00000000000000b0       0x1d io/io.o
+ .comment       0x00000000000000cd       0x1d libc/stdio.o
+ .comment       0x00000000000000ea       0x1d hardware/cpuid.o
+ .comment       0x0000000000000107       0x1d hardware/keyboard.o
+ .comment       0x0000000000000124       0x1d processore/gdt.o
+ .comment       0x0000000000000141       0x1d processore/idt.o
+ .comment       0x000000000000015e       0x1d processore/handlers.o
+ .comment       0x000000000000017b       0x1d hardware/pic8259.o
+ .comment       0x0000000000000198       0x1d mem/fismem.o
+ .comment       0x00000000000001b5       0x1d mem/paging.o
+ .comment       0x00000000000001d2       0x1d system/syscall.o
+ .comment       0x00000000000001ef       0x1d hardware/8253.o
+ .comment       0x000000000000020c       0x1d shell/shell.o
 
 .note.GNU-stack
                 0x0000000000000000        0x0

Modified: trunk/mem/paging.c
===================================================================
--- trunk/mem/paging.c	2008-06-10 21:32:30 UTC (rev 7)
+++ trunk/mem/paging.c	2008-06-29 13:28:09 UTC (rev 8)
@@ -183,6 +183,13 @@
     return (unsigned int) (*mod_address);
 }
 
+/**
+  * Carica il registro pdbr con la nuova pagedir
+  * @author Ivan Gualandri
+  * @version 1.0
+  * @param pdbase Indirizzo base della page_dir
+  * @return none
+  */
 void load_pdbr(unsigned int pdbase){
     volatile unsigned int cr0, pdbr, tmp;
     cr0=0;

Modified: trunk/shell/shell.c
===================================================================
--- trunk/shell/shell.c	2008-06-10 21:32:30 UTC (rev 7)
+++ trunk/shell/shell.c	2008-06-29 13:28:09 UTC (rev 8)
@@ -39,7 +39,7 @@
 void logo()
 {
 	printf(&quot;\t-------------------------- \n&quot;
-	       &quot;\tThe Dream Operation System \n&quot;
+	       &quot;\tThe Dream Operating System \n&quot;
 	       &quot;\t      v0.01 pre-alpha      \n&quot;
 	       &quot;\t-------------------------- \n&quot;);
 	printf(&quot;\n\n\n&quot;);


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000007.html">[Dreamos-dev] r7 - in trunk: . include/shell shell system
</A></li>
	<LI>Next message: <A HREF="000009.html">[Dreamos-dev] r9 - in trunk: . shell
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8">[ date ]</a>
              <a href="thread.html#8">[ thread ]</a>
              <a href="subject.html#8">[ subject ]</a>
              <a href="author.html#8">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/dreamos-dev">More information about the Dreamos-dev
mailing list</a><br>
</body></html>
